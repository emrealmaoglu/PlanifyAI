
Generative Spatial Planning: A Framework for Validation and Optimization Using Traffic Microsimulation


The New Paradigm: Simulation-Driven Spatial Planning


Executive Overview

Urban planning is undergoing a fundamental paradigm shift, moving away from static, standards-based design toward a dynamic, performance-driven methodology. Historically, spatial plans were conceived based on established guidelines, historical precedent, and the professional judgment of planners, resulting in a single, definitive master plan. This approach, while foundational, is inherently limited in its capacity to anticipate the complex, emergent behaviors of urban systems. The introduction of generative design, powered by computational simulation, offers a transformative alternative. This new paradigm allows planners not merely to propose a single design but to explore a vast "design space" of potential urban forms, transportation networks, and land-use configurations. Each proposed design within this space can be treated as a testable hypothesis, rigorously evaluated within a virtual laboratory that simulates the dynamic interactions of its future inhabitants. Traffic microsimulation stands at the core of this virtual laboratory, providing the necessary fidelity to model the second-by-second decisions of individual travelers and the resulting network-level phenomena, such as congestion, accessibility, and emissions. By leveraging these tools, planners can move beyond intuition and static calculations to make evidence-based decisions, optimizing urban environments for efficiency, sustainability, and equity before a single shovel breaks ground.

The Core Concept: From Validation to Co-Optimization

The integration of traffic microsimulation into spatial planning unfolds across two distinct but related applications: validation and co-optimization. The first, validation, represents the most direct and widely adopted use case. In this context, a human-designed plan—be it a new subdivision, a redesigned arterial road, or a comprehensive city-wide transit network—is translated into a simulation model to assess its viability and performance under projected demand. The fundamental question being answered is predictive: "Will this proposed road network adequately support the expected morning peak traffic?" or "Does this new bike lane network genuinely improve accessibility to key amenities for residents?".1 This process allows for the identification of unforeseen bottlenecks, safety hazards, or inefficiencies, enabling iterative refinement of the design based on quantitative performance metrics.
The second, more advanced paradigm is co-optimization. This approach moves beyond simply testing a handful of human-generated alternatives and instead embeds the simulation directly within an automated, algorithmic search process. Here, the simulation model serves as a "fitness function" for a generative algorithm, such as an evolutionary algorithm.3 The algorithm proposes a population of candidate designs, each defined by a set of parameters (e.g., road network topology, traffic signal timings, parking supply locations). Each candidate is automatically simulated, and its performance is scored. Based on these scores, the algorithm "evolves" a new generation of designs, progressively discovering novel, high-performing, and often non-intuitive solutions that a human planner might never conceive.5 This report will first establish the foundational principles and tools required for robust plan validation, before exploring the cutting-edge architectures and methodologies that enable true generative co-optimization of urban space.

Foundations of Traffic Simulation Models


Microscopic vs. Macroscopic Models: A Question of Fidelity

The selection of a traffic simulation model is a critical decision that dictates the types of questions a planner can answer. These models exist on a spectrum of detail, or fidelity, with macroscopic and microscopic models representing the two primary poles.7
Macroscopic models treat traffic flow as a continuum, analogous to fluid dynamics.8 They operate on aggregate variables such as traffic density (vehicles per kilometer), flow rate (vehicles per hour), and mean speed of the entire traffic stream.9 These models are defined by fundamental diagrams that describe the mathematical relationships between these variables.10 Because they do not simulate individual vehicles, macroscopic models are computationally efficient and well-suited for strategic, large-scale analyses, such as evaluating the impact of a new highway on regional traffic patterns or long-term transport policy assessments.11 However, their aggregated nature prevents them from capturing localized, complex traffic dynamics.
Microscopic models, in contrast, represent the highest level of detail. They are fundamentally agent-based, simulating the movement and behavior of each individual vehicle on a second-by-second or even sub-second basis.9 The behavior of these vehicle agents is governed by a set of sophisticated sub-models that replicate driver decision-making.14 Key among these are:
	•	Car-Following Models: These describe the longitudinal movement of a vehicle in relation to the vehicle directly ahead. Models like the Gipps model or the Intelligent Driver Model (IDM) calculate a vehicle's acceleration or deceleration based on its current speed, the speed of the lead vehicle, and the gap between them, ensuring collision-free movement.15
	•	Lane-Changing Models: These govern the lateral movement of vehicles. They distinguish between mandatory lane changes (e.g., needing to exit a freeway) and discretionary lane changes (e.g., moving to a faster lane to overtake a slower vehicle).14
	•	Gap-Acceptance Models: These determine a driver's decision to accept an available gap in traffic, for instance when merging from an on-ramp or making an unprotected left turn at an intersection.8
This high fidelity allows microscopic models to accurately reproduce complex, emergent traffic phenomena like shockwave propagation (the backward-traveling wave of congestion from a bottleneck), queue spillback from intersections, and the nuanced interactions between vehicles, pedestrians, and traffic signals.1 This makes them indispensable tools for the detailed operational analysis and validation of specific infrastructure designs, such as a new intersection layout or a school drop-off zone.11
Between these two extremes lie mesoscopic models. These models, often employed by platforms like MATSim and Aimsun, offer a hybrid approach. They typically track individual agents and their routes (like microscopic models) but use simplified, computationally faster methods for modeling traffic flow on network links, such as queue-based models, rather than detailed car-following logic.11 This compromise allows for the simulation of large, city-scale scenarios with individual agent detail but without the extreme computational overhead of a full microscopic simulation.
The choice of model is therefore not a mere technicality but a direct consequence of the planning question at hand. A strategic inquiry about the potential mode shift from a new regional transit line is a question about large-scale travel patterns, best answered by a macroscopic or large-scale agent-based model. A tactical question about whether a proposed roundabout design will fail during peak hour is a question of intricate vehicle-vehicle interactions and gap acceptance, which demands a microscopic model. Applying the wrong model to the question is a primary source of analytical failure; a microscopic simulation of an entire country would be computationally infeasible, while a macroscopic simulation of a single roundabout would be analytically meaningless. An effective planning organization thus requires a suite of modeling tools and the expertise to deploy the appropriate level of fidelity for each specific planning decision, from the strategic to the tactical.

The Agent-Based Paradigm: Modeling Human Behavior

Modern transportation simulation has evolved beyond simply modeling the physics of vehicles to modeling the behavior of people. In the most advanced frameworks, the fundamental unit of simulation is not the vehicle, but the "agent," which represents an individual person with unique characteristics and a daily agenda.21 This agent-based modeling (ABM) approach is built on the core economic principle of derived demand: travel is not an end in itself, but a means for an agent to participate in a sequence of activities (e.g., home to work, work to lunch, lunch to a meeting, meeting to home) distributed across space and time.23
This activity-based approach represents a significant leap in realism compared to older trip-based models, which considered each trip (e.g., an origin-destination pair) in isolation.26 In an activity-based model, an agent's travel decisions are interconnected. The decision of when to leave work is influenced by the desire to be home for dinner; the choice of transport mode for the morning commute may depend on whether the agent needs a car for a shopping trip later in the day. This holistic view of an agent's daily plan allows for a much richer and more behaviorally sound analysis of how individuals might respond to changes in the urban environment or transportation policy.22
The power of the agent-based paradigm lies in its ability to capture emergent phenomena. Network-level conditions like traffic congestion are not explicitly programmed into the model. Instead, they emerge organically from the bottom-up, collective interactions of thousands or millions of individual agents, each pursuing their own daily plan and competing for the same limited road capacity and time slots.21 A single agent changing their departure time by five minutes may have a negligible effect, but when thousands of agents make similar decisions in response to a new tolling policy or a flexible work schedule, the cumulative effect can dramatically alter network performance. Simulation is the only viable method for uncovering these complex, non-linear, and often counter-intuitive system-level consequences of a proposed spatial plan, providing a virtual laboratory to test urban hypotheses and avoid costly real-world failures.

The Simulation Toolkit: A Comparative Analysis

A diverse ecosystem of software tools has emerged to support traffic simulation, ranging from flexible open-source platforms ideal for research to robust commercial packages favored by industry. The selection of a tool is a critical decision that depends on the specific project requirements, budget, available expertise, and desired level of detail.

Open-Source Platforms: Flexibility and Extensibility

Open-source tools are characterized by their transparency, extensibility, and active research communities. They provide unparalleled flexibility for custom modeling and integration with other software.
SUMO (Simulation of Urban MObility) is widely regarded as the leading open-source package for detailed, research-oriented microscopic traffic simulation.7 Developed primarily by the German Aerospace Center (DLR), its strengths lie in its high-fidelity modeling capabilities and its extensive programmability. SUMO's C++ core ensures high performance, while its powerful Python API, the Traffic Control Interface (TraCI), allows for granular, step-by-step control over every aspect of a running simulation.30 This makes it an exceptional platform for developing and testing advanced traffic management algorithms, autonomous vehicle behaviors, and complex intermodal interactions involving pedestrians, bicycles, and public transport.7 Its open and transparent nature makes it a favorite in academic circles where model assumptions must be scrutinized and customized.7
MATSim (Multi-Agent Transport Simulation) is the premier open-source framework for large-scale, activity-based agent simulation.22 Rather than focusing on high-fidelity vehicle physics, MATSim's strength is in modeling the travel behavior of an entire metropolitan population over a 24-hour period. Its core innovation is a co-evolutionary iterative process where millions of agents repeatedly simulate their daily activity plans, receive a utility "score" based on their experience (e.g., travel time, schedule delays), and then "re-plan" their choices (mode, route, departure time) to improve their score in the next iteration.24 This process continues until the system reaches a user equilibrium, providing a powerful tool for strategic analysis of how land-use changes, new transport policies, or emerging mobility services might impact regional travel patterns and accessibility.33

Commercial Platforms: Usability and Support

Commercial platforms are the tools of choice for many transportation consultancies and public agencies, prized for their user-friendly interfaces, professional support, and seamless integration into established planning workflows.
PTV VISSIM and Aimsun Next are two of the most prominent industry-standard packages.12 Their primary advantages include robust graphical user interfaces (GUIs) that simplify network creation, editing, and the visualization of results through high-quality 2D and 3D animations.36 These tools offer reliable, professionally maintained models and provide official training and customer support, which is critical for project-based work with tight deadlines. They excel at integrating with other planning software suites (such as PTV Visum for demand modeling) and have built-in support for common data formats used in civil engineering, including CAD and GIS files.38 A key feature of Aimsun Next is its hybrid modeling capability, which allows a single project to contain macroscopic, mesoscopic, and microscopic models, enabling planners to use the appropriate level of detail for different parts of the network.36
The decision to invest in a commercial license is often justified by the need for legally defensible and certified results, which may be required for public infrastructure projects, traffic impact assessments, and litigation support.29 While open-source tools offer greater flexibility for research, commercial packages provide a streamlined, reliable, and supported environment for professional practice.
Table 1: Comparative Analysis of Traffic Simulation Platforms

Platform
License
Primary Modeling Paradigm
Core Strengths
Key Limitations
API/Scripting Support
Typical Use Case
SUMO
Open-Source (EPL 2.0)
Microscopic, Agent-Based
High-fidelity, transparent models; extensive Python (TraCI) API for control; strong multimodal support; large tool suite for scenario creation.[7, 29, 31]
Steeper learning curve; GUI is less polished than commercial alternatives; primarily for research and custom applications.[29]
Python (TraCI), C++ (libsumo)
Detailed operational analysis of intersections; testing V2X/AV algorithms; academic research on traffic flow theory.
MATSim
Open-Source (GPL)
Agent-Based, Mesoscopic (Queue-Based)
Large-scale (metropolitan) scenarios; activity-based demand modeling; co-evolutionary equilibrium finding; strong for policy analysis.[22, 24, 33]
Simplified traffic physics (no detailed car-following); less suited for fine-grained intersection design; requires Java expertise for customization.[19, 29]
Java
Strategic analysis of land use changes; evaluating new public transit policies; modeling demand for new mobility services (e.g., ride-hailing).
PTV VISSIM
Commercial
Microscopic, Behavior-Based
Industry standard with high realism; strong GUI and 3D visualization; detailed pedestrian modeling; integration with PTV Visum.[29, 35]
Expensive proprietary license; "black box" nature of some models; less flexible for deep customization than open-source tools.[29]
COM Interface, Python
Traffic impact studies for new developments; signal timing optimization; design of complex interchanges and roundabouts.
Aimsun Next
Commercial
Hybrid (Macro, Meso, Micro)
Integrated multi-resolution modeling in a single platform; strong DTA capabilities; good GUI and GIS/CAD data integration.36
Expensive proprietary license; complexity of managing a hybrid model can be high.
Python API, C++ SDK
Corridor analysis combining freeway (meso) and arterial (micro) sections; large-scale regional models with detailed sub-area analysis.

Operational Analysis with SUMO: A Practical Guide

SUMO's power lies in its command-line tools and extensive Python API, which enable reproducible, script-based workflows for scenario creation and analysis. This section provides a practical guide to the core SUMO workflow for validating a spatial plan.

Workflow 1: Network Import and Preparation

The foundation of any simulation is the road network, represented in SUMO by a .net.xml file. While networks can be defined manually, the most common and efficient method is to import real-world data from OpenStreetMap (OSM), a global, collaboratively edited map.40
This process is handled by the netconvert tool. A typical command to import a map of a specific area and prepare it for vehicular traffic simulation looks like this:

Bash


netconvert --osm-files my_map.osm.xml \            -o my_network.net.xml \            --geometry.remove \            --ramps.guess \            --junctions.join \            --tls.guess-signals \            --tls.discard-simple \            --remove-edges.by-vclass rail_slow,rail_fast,bicycle,pedestrian \            --remove-edges.isolated \            --output.street-names 
This command instructs netconvert to read an OSM file, guess ramp and junction connections, infer traffic light systems, and critically, remove network edges that are not intended for cars (such as railway lines and dedicated pedestrian paths).41 The resulting my_network.net.xml file contains the complete network topology, including nodes (junctions), edges (streets), lanes, speed limits, and right-of-way logic. For manual inspection and refinement of the network—for instance, to correct lane numbers or add a missing connection—SUMO provides a graphical network editor called netedit, which is an indispensable tool for quality control.32

Workflow 2: Traffic Demand Generation

With the network in place, the next step is to generate traffic demand, which is defined in a .rou.xml file containing the routes for all vehicles in the simulation. SUMO offers several methods to accomplish this, catering to different data availability scenarios.30
	•	Method A: From Origin-Destination (O/D) Matrices: This is a common approach in traditional transport planning. An O/D matrix specifies the number of trips between different zones (Traffic Analysis Zones, or TAZs) in a given time period. SUMO's od2trips tool can read this matrix and disaggregate it into individual vehicle trips, each with a specific origin edge and destination edge.30 The tool stochastically assigns departure times to create a realistic flow of traffic over the period.
	•	Method B: From Traffic Counts: When real-world data from loop detectors or traffic cameras is available, it can be used to generate a demand model that reproduces observed traffic volumes. The routeSampler.py tool takes traffic counts for various locations in the network and uses an iterative process to generate a set of routes that, when simulated, best matches these counts.43 This is a powerful calibration technique for creating a realistic base model.
	•	Method C: Activity-Based Generation: For scenarios where detailed O/D or count data is unavailable, SUMO's activitygen tool can create a synthetic demand based on high-level statistical inputs.30 The user provides a file describing the city's demographics (e.g., population, number of households, car ownership rate) and land use (e.g., locations of residential areas, workplaces, and schools). The tool then generates a synthetic population and assigns plausible daily activity chains (e.g., home-work-home), creating a behaviorally grounded, albeit simplified, demand model.45

Dynamic Control and Data Extraction with Python and TraCI

The most powerful feature of SUMO for advanced analysis and optimization is the Traffic Control Interface (TraCI). TraCI is a client-server API that allows an external application, typically a Python script, to connect to a running SUMO simulation and interact with it in real-time on a step-by-step basis.30
The core of a TraCI script is the control loop. The Python script first launches the SUMO process and establishes a connection. Then, it enters a loop where it commands SUMO to advance the simulation by one time step, retrieves data from the new simulation state, performs calculations or makes decisions, and potentially sends commands back to SUMO to alter the simulation's course. This loop continues until a termination condition is met.46
A foundational Python script for running a SUMO simulation via TraCI is structured as follows:

Python


import os import sys import traci  # Ensure SUMO_HOME is set in environment variables if 'SUMO_HOME' in os.environ:     tools = os.path.join(os.environ, 'tools')     sys.path.append(tools) else:     sys.exit("Please declare environment variable 'SUMO_HOME'")  # Path to the SUMO binary (use 'sumo' for command-line, 'sumo-gui' for GUI) sumo_binary = "sumo-gui" # Command to start SUMO with a specific configuration file sumo_cmd = [sumo_binary, "-c", "my_scenario.sumocfg"]  # Start the simulation and connect TraCI traci.start(sumo_cmd)  step = 0 # Main simulation loop while traci.simulation.getMinExpectedNumber() > 0:     traci.simulationStep()  # Advance the simulation by one step      # --- Example: Data Extraction ---     # Get IDs of all vehicles that entered the simulation in the last step     arrived_vehicles = traci.simulation.getArrivedIDList()     if arrived_vehicles:         print(f"Step {step}: Vehicles arrived: {arrived_vehicles}")      # Get the speed of a specific vehicle     if "vehicle_0" in traci.vehicle.getIDList():         speed = traci.vehicle.getSpeed("vehicle_0")         print(f"Speed of vehicle_0: {speed:.2f} m/s")      # --- Example: Simulation Control ---     # If a specific condition is met, change the route of a vehicle     if step == 100 and "vehicle_1" in traci.vehicle.getIDList():         print("Rerouting vehicle_1...")         traci.vehicle.changeTarget("vehicle_1", "destination_edge_new")      step += 1  # Close the TraCI connection traci.close() print("Simulation finished.") 
This simple structure opens up immense possibilities. Data extraction can range from fetching the speed and position of individual vehicles to getting aggregate data like the number of vehicles on a specific edge or the current phase of a traffic light.47 Simulation control allows for dynamic interventions, such as implementing adaptive traffic signal control, simulating variable message signs by re-routing vehicles away from congestion, or introducing new vehicles to model on-demand services.46
For efficiency, TraCI offers a subscription mechanism. Instead of polling for a variable's value at every step (which incurs communication overhead), a script can "subscribe" to specific variables for specific objects. SUMO will then automatically send the updated values after each simulation step, which can be retrieved in a single batch call. This is significantly more performant for monitoring many objects simultaneously.46
Table 2: Essential SUMO TraCI Commands for Spatial Analysis
Command Category
TraCI Function (Python)
Description
Example Use Case
Simulation
traci.simulation.getMinExpectedNumber()
Returns the number of vehicles yet to enter or finish their journey.
Controlling the main simulation loop to run until all trips are complete.

traci.simulation.getCurrentTime()
Gets the current simulation time in milliseconds.
Timestamping events or triggering time-dependent actions.

traci.simulation.convertGeo(x, y)
Converts simulation coordinates to geographic (lon, lat).
Integrating simulation outputs with GIS platforms for spatial analysis.
Vehicle
traci.vehicle.getIDList()
Returns a list of all vehicle IDs currently in the simulation.
Iterating through all active vehicles to collect aggregate statistics.

traci.vehicle.getPosition(vehID)
Gets the (x, y) coordinates of a vehicle.
Tracking vehicle trajectories for visualization or analysis.

traci.vehicle.getSpeed(vehID)
Gets the current speed of a vehicle in m/s.
Calculating average network speed or identifying speeding vehicles.

traci.vehicle.getRoute(vehID)
Returns the list of edges that constitute a vehicle's current route.
Analyzing route choice behavior.

traci.vehicle.changeTarget(vehID, edgeID)
Dynamically changes the destination edge for a vehicle.
Simulating dynamic routing in response to congestion or incidents.

traci.vehicle.getTimeLoss(vehID)
Gets the vehicle's current time loss (delay) in seconds.
Quantifying congestion impact on individual travelers.
Edge/Lane
traci.edge.getLastStepVehicleIDs(edgeID)
Returns the IDs of all vehicles on a given edge.
Calculating traffic density on specific road segments.

traci.edge.getTraveltime(edgeID)
Gets the current expected travel time for an edge.
Providing real-time travel time information for dynamic routing algorithms.

traci.lane.getLastStepHaltingNumber(laneID)
Gets the number of vehicles stopped (speed < 0.1 m/s) on a lane.
Measuring queue lengths at intersections.
Junction
traci.trafficlight.getRedYellowGreenState(tlsID)
Returns the current state string (e.g., "GrGr") for a traffic light.
Monitoring signal operations or implementing adaptive signal control.

Strategic Regional Modeling with MATSim

While SUMO excels at detailed operational analysis, MATSim is the tool of choice for strategic, large-scale modeling that places human behavior at its core. It is designed to answer questions about how entire urban populations will adapt their daily travel patterns in response to significant changes in the transportation system or built environment.

The MATSim Loop: A Co-Evolutionary Approach

MATSim's unique methodology is centered around an iterative, co-evolutionary optimization loop that seeks to find a system-level equilibrium.24 This process consists of four key stages that are repeated for hundreds of iterations:
	•	Initial Demand: The simulation begins with a "synthetic population" where each individual agent is assigned an initial daily plan. A plan is a sequence of activities (e.g., 'home', 'work', 'shopping') at specific locations, connected by travel legs with a defined mode of transport.22
	•	Mobility Simulation (Mobsim): All agents in the population attempt to execute their current plans simultaneously. The travel legs are simulated on the network using a computationally efficient queue-based model. As agents travel, they interact and compete for limited network capacity, leading to congestion and travel delays.24 This mobsim calculates the actual travel times and arrival times for every agent.
	•	Scoring: After the 24-hour simulation is complete, each agent's executed plan is evaluated and assigned a utility "score." This score is calculated based on a utility function that typically rewards time spent performing desired activities and penalizes time spent traveling or arriving late. The scoring function is the mathematical representation of an agent's preferences.22
	•	Re-planning: In this crucial step, a fraction of the agent population (e.g., 10%) are given the opportunity to modify their plans to try and achieve a better score in the next iteration. MATSim employs several re-planning modules, allowing agents to change their route (ChangeLegMode), transport mode (ChangeLegMode), departure time (TimeAllocationMutator), or even activity locations (DestinationChoice). The agents that were not selected for re-planning carry their existing plan over to the next iteration.24
This entire loop is repeated until the average scores of the population stabilize, indicating that the system has reached a relaxed state or a dynamic user equilibrium. At this point, agents have found daily plans that are optimal for them, given the congestion created by all other agents.

Activity-Based Demand in Practice

The foundation of a MATSim scenario is its activity-based demand model. This process begins by creating a synthetic population that statistically mirrors the real population of the study area, typically derived from census data. Each synthetic agent is assigned demographic attributes like age, employment status, and car ownership.27 Subsequently, daily activity patterns, derived from household travel surveys, are assigned to these agents. For example, a full-time employed agent will be assigned a 'home-work-home' pattern, while a retired agent might have a more flexible 'home-shopping-leisure-home' pattern.25 This behaviorally grounded approach ensures that the simulated travel demand is not arbitrary but is rooted in the realistic needs and constraints of the population. This allows the model to predict how different population segments might respond to policy changes. For instance, a new remote work policy could be modeled by allowing a certain percentage of employed agents to remove their 'work' activity and associated commute trips from their daily plan.26

Evaluating Spatial Plans with MATSim

MATSim's strength lies in its ability to assess the system-wide, equilibrium impacts of large-scale spatial and policy interventions. Rather than just measuring traffic flow on a single corridor, it evaluates how the entire system re-balances. For example, if a major road is closed for a road diet project, MATSim will not only show re-routing onto adjacent streets but will also capture agents who choose to switch to public transport, travel at a different time of day, or even cancel their trip altogether because the increased congestion makes it no longer worthwhile.
This makes MATSim an ideal tool for evaluating strategic spatial plans.50 Planners can use it to assess the impact of a new transit-oriented development by adding new residential and commercial facilities to the model and observing how this changes regional travel flows and mode shares.34 Similarly, the introduction of a new on-demand transit service can be evaluated by giving agents a new mode choice option and analyzing its competitiveness with private cars and traditional public transport, as well as its impact on overall vehicle-kilometers traveled.51 The primary outputs for planners are not just traffic metrics, but changes in accessibility to opportunities (jobs, healthcare, education) and the distribution of travel utility across different socio-economic groups, providing powerful insights into the equity and social impacts of a plan.2
The distinct capabilities of SUMO and MATSim highlight a powerful workflow for comprehensive planning. A strategic question, such as "How will a new transit-oriented development (TOD) affect regional travel patterns?", is best addressed by MATSim. Its activity-based demand and equilibrium-finding loop can predict how the population will adapt its travel modes and destinations in response to the new land use.33 Once MATSim has produced an equilibrated, post-TOD travel demand for the entire region, a tactical question arises: "How should the intersections and bus lanes within the TOD itself be designed to handle this new demand without causing gridlock?". This question requires the high-fidelity physics of a microscopic model. The most advanced analytical approach is therefore a sequential coupling: use MATSim to generate the behaviorally realistic travel demand, then extract the subset of trips that interact with the specific area of interest, and use this as the input for a detailed SUMO model of that sub-network.19 This hybrid approach leverages the behavioral realism of MATSim and the physical accuracy of SUMO, providing a level of analytical rigor that neither tool could achieve in isolation.

The Co-Optimization Framework: Integrating Simulation and Generative Design

Beyond validating pre-defined plans, the ultimate goal is to use simulation to automatically discover novel, high-performing urban designs. This is achieved through a "simulation-in-the-loop" (SITL) optimization framework, which tightly couples a generative algorithm with a simulation model.

Simulation-in-the-Loop (SITL) Architecture

The SITL architecture operates as a closed-loop feedback system, automating the process of design, testing, and refinement.3 The workflow consists of four key steps:
	•	Generation: A generative model, such as an optimization algorithm, proposes a candidate design. This design is not a complete drawing but a set of numerical parameters that define it. For a road network, these parameters could represent the number of lanes on each street segment, the speed limits, or the phasing plan for a set of traffic signals.
	•	Execution: The set of design parameters is used to automatically configure and run a traffic microsimulation model (e.g., SUMO). The simulation plays out the consequences of the proposed design, modeling how traffic would flow and how agents would behave within it.
	•	Evaluation: Key performance metrics are extracted from the simulation outputs. These metrics (e.g., average network travel time, total CO2 emissions, pedestrian delay) are then combined into a single or multi-objective "fitness score." This score provides a quantitative measure of the design's quality according to the planner's objectives.3
	•	Feedback: The fitness score is passed back to the generative algorithm. The algorithm uses this feedback to learn about the relationship between design parameters and performance, and then generates a new, hopefully improved, candidate design for the next iteration.
This loop repeats, iteratively exploring the design space and converging towards solutions that optimize the defined objectives.

Computational Challenges: The Evaluation Bottleneck

The primary and most significant barrier to the widespread adoption of SITL for complex urban planning problems is the immense computational cost.53 A single, detailed microsimulation run for a moderately sized urban area can take anywhere from several minutes to many hours to complete. Optimization algorithms, especially for high-dimensional design spaces, may require thousands or even millions of function evaluations to find good solutions. Consequently, a naive SITL approach where every single evaluation involves a full simulation run is often computationally intractable, potentially requiring weeks or months of computing time on powerful hardware. Overcoming this "evaluation bottleneck" is the central challenge in the field of simulation-based optimization.

Pairing with Evolutionary Algorithms (EAs)

Evolutionary Algorithms (EAs), a class of metaheuristic optimization methods inspired by natural selection, are particularly well-suited to the challenges of SITL.4 Unlike gradient-based methods, EAs do not require the objective function to be differentiable or even continuous, making them robust for noisy, complex, and "black-box" functions like a traffic simulation.
EAs operate on a "population" of candidate solutions in each generation. This feature makes them naturally amenable to parallel evaluation. If a computing cluster with 100 CPU cores is available, 100 different candidate designs from the population can be simulated simultaneously, one on each core. This can reduce the wall-clock time required to evaluate one generation by a factor of 100, making the optimization process dramatically more feasible.4 Furthermore, the evolutionary process of selection, crossover, and mutation inherently guides the search towards more promising regions of the design space over time. This acts as a form of adaptive sampling, focusing computational effort on refining good solutions rather than wasting time evaluating obviously poor ones. This synergy between the population-based nature of EAs and the availability of parallel computing is a key enabler for tackling large-scale, simulation-based design problems.

Accelerating Optimization with Surrogate Models

Even with parallel computing, the number of required simulations for a full optimization can be prohibitive. The most effective strategy for overcoming the evaluation bottleneck is the use of surrogate models, also known as metamodels.

The Metamodeling Concept

A surrogate model is a computationally cheap, approximate mathematical function that learns to mimic the behavior of the expensive, high-fidelity simulation.53 It acts as a statistical proxy, capturing the complex input-output relationship of the simulation without needing to run the simulation itself for every query. The integration of a surrogate model into the optimization loop follows a specific workflow:
	•	Initial Sampling: A small number of full simulation runs are executed at carefully chosen points in the design space. This initial set of runs forms the training data for the surrogate model.
	•	Surrogate Training: A statistical model (e.g., a Gaussian process or a neural network) is trained on the input-output pairs from the initial sampling phase. The trained model can now predict the simulation output (the fitness score) for any new set of input parameters almost instantaneously.53
	•	Surrogate-Based Optimization: The fast-to-evaluate surrogate model is then passed to the optimization algorithm. The optimizer can now perform thousands of evaluations on the surrogate, rapidly exploring the design space and identifying a candidate solution that the surrogate predicts will be optimal.58
	•	Verification and Refinement: The promising candidate solution found via the surrogate is then evaluated using a single run of the full, expensive simulation. This provides the true fitness score for that design point. This new, verified input-output pair is then added to the training dataset, and the surrogate model is re-trained, improving its accuracy for the next iteration of the optimization.
This process, often called efficient global optimization or Bayesian optimization, intelligently balances exploration (running simulations in areas of high uncertainty) and exploitation (running simulations to verify promising optima), allowing the optimizer to find high-quality solutions with a fraction of the computational budget required by a direct simulation-in-the-loop approach.

Types of Surrogate Models

Several types of mathematical models are commonly used as surrogates in transportation optimization, each with its own trade-offs:
	•	Polynomial Regression: Simple and fast to train, but often too inflexible to capture the highly non-linear behavior of traffic systems.53
	•	Kriging (Gaussian Processes): A popular method that not only provides a prediction but also an estimate of the uncertainty of that prediction. This uncertainty measure can be used to intelligently guide the search for new points to simulate.60
	•	Radial Basis Functions (RBFs): A robust interpolation method that works well for high-dimensional problems.
	•	Deep Neural Networks (DNNs): With sufficient data, DNNs can learn extremely complex and non-linear relationships, making them powerful surrogates. However, they typically require more training data than other methods and can be prone to overfitting when the simulation budget is very tight.53
The integration of these advanced computational techniques—simulation, optimization algorithms, and surrogate models—represents a complete framework for what can be termed "computational steering" in urban design. This framework fundamentally alters the role of the urban planner. The planner's task shifts from being the direct "designer of a final solution" to becoming the "architect of the design problem." Their expertise is no longer solely focused on drawing a single plan, but on defining the objectives, constraints, and trade-offs that guide the automated search process. For example, the planner must articulate the fitness function: is the goal to minimize average travel time, maximize pedestrian safety, reduce carbon emissions, or—more realistically—achieve a balanced trade-off between all three?.2 The computational framework then explores the vast solution space defined by these objectives, often presenting the planner not with a single "optimal" solution, but with a Pareto front of equally optimal, non-dominated solutions. Each point on this front represents a different trade-off (e.g., one solution has slightly lower travel times but higher emissions, while another has the reverse). The planner's role then becomes one of a curator and facilitator, using these quantified trade-offs to engage with stakeholders and make a collective, informed decision about which future is most desirable for the community.60

Quantifying Planning Outcomes: Performance and Accessibility Metrics

To validate or optimize a spatial plan, abstract goals must be translated into concrete, quantifiable performance metrics that can be extracted from the simulation. These metrics serve as the basis for both manual evaluation and automated fitness functions.

Core Performance Metrics from Simulation

Traffic microsimulation platforms can generate a rich variety of output data that can be aggregated into key performance indicators (KPIs) across several domains:
	•	Efficiency Metrics: These metrics measure how effectively the network moves people and goods.
	•	Average Travel Time: The mean time it takes for vehicles to complete their trips. This is a primary indicator of overall network performance.17
	•	Throughput: The number of vehicles or people that pass a certain point or complete their trips within a given time period (e.g., vehicles per hour). This measures the network's capacity and productivity.63
	•	Vehicle-Miles Traveled (VMT): The total distance traveled by all vehicles. This is often used as a proxy for overall travel demand and environmental impact.62
	•	Congestion Metrics: These metrics quantify the severity and location of traffic congestion.
	•	Average Delay: The difference between actual travel time and the theoretical free-flow travel time. This directly measures the time lost to congestion.17
	•	Queue Length: The number of vehicles or physical length of a queue waiting at an intersection or bottleneck. This is critical for identifying operational failures where queues might spill back and block upstream junctions.17
	•	Number of Stops: The average number of times a vehicle comes to a complete stop during its trip. This is related to both delay and fuel consumption.63
	•	Environmental Metrics: These metrics assess the environmental footprint of the transportation system.
	•	Fuel Consumption and Emissions: Based on the second-by-second acceleration and deceleration profiles of each vehicle, models like SUMO can apply emission models (e.g., HBEFA) to estimate the total fuel consumed and the output of pollutants such as carbon dioxide ($CO_2$), nitrogen oxides ($NO_x$), and particulate matter.64

Multimodal and Accessibility Analysis

Modern urban planning emphasizes sustainability and equity, requiring analysis that goes beyond vehicle-centric metrics. Microsimulation is increasingly capable of supporting these broader goals.
	•	Modeling Multimodal Networks: Simulators like SUMO and MATSim can represent complex multimodal networks. This includes defining public transport services with specific routes, timetables, vehicle capacities, and stop locations.24 It also involves modeling dedicated infrastructure for active transport, such as pedestrian sidewalks, crossings, and separated bicycle lanes, allowing for the simulation of interactions between different modes.65
	•	Quantifying Accessibility: Perhaps the most powerful application for spatial planning is using simulation to generate dynamic, congestion-aware accessibility metrics. The core output of a large-scale simulation is a travel time matrix, which contains the door-to-door travel time between any two points in the study area for each available mode (walk, bike, public transport, car). Unlike static, distance-based measures, these travel times account for real-world conditions like traffic congestion, transit waiting times, and transfer penalties.
These dynamic travel time matrices can then be used as a direct input into classic accessibility formulations, such as the Hansen accessibility index, a form of gravity model.19 The accessibility ($A_i$) of a location $i$ to a certain type of opportunity (e.g., jobs) is calculated as:

$$A_i = \sum_{j} O_j \cdot f(c_{ij})$$

where $O_j$ is the number of opportunities at destination $j$, and $f(c_{ij})$ is an impedance function based on the travel cost (e.g., travel time, $c_{ij}$) from $i$ to $j$. By using the travel times generated from a multimodal microsimulation for $c_{ij}$, planners can produce a highly accurate and behaviorally realistic map of accessibility across the city. This allows for the evaluation of a spatial plan's impact on equity, answering critical questions like: "Does this new transit line actually improve access to jobs for low-income communities, or is the benefit negated by long walking times to the new stations?"
Table 3: Key Performance Metrics for Spatial Plan Validation
Planning Goal
Corresponding Simulation Metric(s)
How to Extract (Example: SUMO)
Interpretation
Improve Network Efficiency
Average Travel Time, Throughput, Vehicle-Kilometers Traveled (VKT)
Tripinfo Output (tripinfo.xml), Edge-based traffic dumps, TraCI functions (traci.edge.getTraveltime)
Lower travel times and VKT, and higher throughput indicate a more efficient network design for the given demand.
Reduce Congestion
Average Delay, Queue Lengths, Number of Stops, Time Loss
Tripinfo Output, Queue Output (queue.xml), Lane Area Detectors, TraCI (traci.vehicle.getTimeLoss, traci.lane.getLastStepHaltingNumber)
Lower values for these metrics point to reduced bottlenecks and smoother traffic flow. Critical for identifying intersection failures.
Enhance Environmental Sustainability
Total Fuel Consumption, Emissions ($CO_2$, $NO_x$, PMx)
Emissions Output (emission.xml), TraCI (traci.vehicle.getCO2Emission)
Lower emissions and fuel use directly quantify the environmental benefits of a plan (e.g., promoting mode shift, reducing stop-and-go traffic).
Promote Equity & Accessibility
Travel Time Matrices (by mode), Hansen Accessibility Score
Run simulation for all O-D pairs; post-process travel times with GIS/Python.
Provides a quantitative measure of how easily different population groups can reach opportunities (jobs, healthcare, etc.) via different modes.
Validate 15-Minute City Concept
Door-to-door travel time by walking and cycling to key amenities.
Person-based simulation outputs, post-processing of trip information.
Percentage of residents who can reach a defined set of essential services within a 15-minute travel time budget by active modes.

Applications in Practice: Simulation-Validated Planning

The theoretical frameworks and tools discussed above find their value in practical application. The following case studies, synthesized from recent research and practice, illustrate how microsimulation is being used to validate and improve contemporary urban planning concepts.

Case Study 1: Validating a "15-Minute City" Concept

The "15-Minute City" is a planning concept that aims to provide all residents with access to essential daily needs—such as work, shopping, education, and recreation—within a 15-minute walk or bike ride from their home.68 While appealing in principle, its success is entirely dependent on the physical layout of the neighborhood and the quality of its active transportation network. Microsimulation provides a robust methodology to quantitatively validate whether a proposed design achieves this goal.69
Methodology:
	•	Define the Spatial Plan: A generative model or a planner designs a new mixed-use neighborhood. The design specifies the road network, dedicated pedestrian and cycling paths, the location of residential buildings, and the locations of key amenities (e.g., grocery stores, primary schools, parks, public transit stops).
	•	Model the Multimodal Network: The complete plan is modeled in a simulation platform like SUMO or MATSim. This requires detailed representation of not only the road network but also all sidewalks, crosswalks, and bike lanes, with accurate connectivity and right-of-way rules.65 Public transport services are also modeled with their routes and schedules.
	•	Generate Activity-Based Demand: A synthetic population for the new neighborhood is created. Each agent is assigned a daily plan that includes trips to essential services. For example, agents in households with children are assigned trips to the nearest school; all agents are assigned periodic trips to grocery stores.
	•	Simulate and Extract Travel Times: The simulation is run, modeling the full multimodal travel of the residents. The key output is the door-to-door travel time for each agent's trip from their residence to their destination amenity, specifically for walking and cycling modes. This accounts for walking speed, intersection delays (waiting for signals), and terrain.
Validation Metrics and Outcome:
The primary validation metric is the accessibility success rate: the percentage of residents who can reach a predefined basket of essential services (e.g., at least one grocery store, one park, and one transit stop) within the 15-minute threshold by active modes. The simulation results provide a detailed accessibility map of the neighborhood, highlighting specific residential blocks that may be underserved or routes that are unexpectedly slow due to poor intersection design. This quantitative feedback allows planners to make targeted revisions—such as adding a new mid-block crossing, widening a sidewalk, or re-routing a bike path—and re-run the simulation to verify the improvement, ensuring the final design delivers on its core promise.

Case Study 2: Evaluating Tactical Urbanism and Road Dieting

Tactical urbanism involves low-cost, temporary changes to the built environment to test new ideas for urban design, such as converting a traffic lane into a pop-up park or an outdoor dining area.70 While these interventions can greatly enhance public space, they carry the risk of negatively impacting traffic flow. Microsimulation serves as a "digital twin" to de-risk these projects before implementation.2 A case study based on work in San Jose, California, demonstrates this process.70
Methodology:
	•	Build and Calibrate a Base Model: A detailed microscopic model (using a tool like VISSIM or SUMO) of the existing downtown street network is created. The model is carefully calibrated using real-world traffic counts and travel time data to ensure it accurately reproduces current traffic conditions, particularly during the PM peak hour.70
	•	Model the Intervention: The calibrated base model is modified to represent the proposed "road diet." For example, the number of lanes on a specific street segment is reduced from two to one, and the freed-up space is re-designated for non-traffic use.
	•	Simulate "After" Scenarios: The modified network is simulated under various demand scenarios. This could include the current, calibrated traffic demand to assess the worst-case impact, as well as scenarios with reduced demand (e.g., a 10% or 20% reduction) to reflect potential shifts in travel patterns that might make the intervention more viable.70
Metrics and Outcome:
The evaluation focuses on the network-level impacts of the change. Key metrics include the change in average travel time and delay not only on the affected street but also on parallel corridors, which may absorb the diverted traffic.70 Queue lengths at upstream and downstream intersections are closely monitored to detect potential spillback that could cause gridlock. The simulation provides decision-makers with clear, quantitative data on the trade-offs. It might show that converting the lane has a negligible impact on overall network delay, providing the confidence to proceed. Conversely, it might reveal that the change would cause unacceptable congestion on a critical parallel route, prompting planners to either abandon the project or implement mitigating measures, such as re-timing nearby traffic signals, before the real-world trial begins. This simulation-first approach allows for ambitious urban experiments while minimizing public disruption and political risk.

Conclusion and Strategic Recommendations


Summary of Findings

The integration of traffic microsimulation with spatial planning marks a pivotal evolution in the design and management of urban environments. This report has established that moving beyond static analysis to embrace dynamic, agent-based simulation is no longer a niche academic exercise but a necessary step for creating efficient, sustainable, and resilient cities. The analysis reveals a clear distinction and a powerful synergy between different modeling paradigms. High-fidelity microscopic tools like SUMO are indispensable for the tactical validation of specific infrastructure designs, providing granular insights into operational performance. Simultaneously, large-scale, activity-based platforms like MATSim are essential for strategic planning, enabling the assessment of how regional travel patterns and behaviors will adapt to systemic changes in land use and policy.
The most transformative potential, however, lies in the co-optimization frameworks that couple these simulations with generative algorithms. While computationally demanding, techniques such as parallel evaluation with evolutionary algorithms and the use of surrogate models are making it increasingly feasible to automate the search for high-performing urban designs. This fundamentally shifts the planner's role from that of a creator of a single, static plan to an architect of a dynamic problem—defining the objectives, constraints, and trade-offs that guide a computational search for a multitude of superior solutions. The ability to quantify planning goals through specific simulation metrics—from network efficiency and congestion to environmental impact and multimodal accessibility—provides the foundation for this new, evidence-driven approach to shaping the cities of the future.

Strategic Recommendations for Planning Agencies

To harness the capabilities outlined in this report, planning agencies and transportation authorities should consider a strategic, phased adoption of simulation-driven workflows.
	•	Adopt a Tiered Modeling Approach: Agencies should build a portfolio of modeling tools that match the hierarchy of planning decisions. This involves using large-scale, activity-based models (e.g., MATSim) for long-range strategic planning, regional policy analysis, and demand forecasting. For corridor studies, operational analysis, and detailed infrastructure design, high-fidelity microscopic models (e.g., SUMO, VISSIM, Aimsun) should be deployed. Developing workflows that allow demand from strategic models to inform the inputs for tactical models will create a consistent and powerful analytical ecosystem.
	•	Invest in Data and Human Capital: The principle of "garbage in, garbage out" is paramount. The accuracy of any simulation is fundamentally limited by the quality of its input data. Agencies must invest in robust data collection programs, including traffic counts, travel time data, and comprehensive household travel surveys, which are the bedrock of activity-based models.72 Equally important is investing in human capital. This requires hiring or training staff with a hybrid skillset encompassing transportation engineering, data science, and programming (particularly Python), who are capable of managing complex data, scripting simulation workflows, and interpreting the nuanced outputs of these advanced models.
	•	Start with Validation, Evolve to Optimization: A pragmatic adoption pathway should begin with the more accessible application: validation. Agencies should first build capacity by using simulation to test and refine their existing, human-led design processes. This builds confidence in the tools and demonstrates their value in de-risking projects. As in-house expertise and computational resources grow, agencies can then progressively move towards the more advanced paradigm of simulation-in-the-loop optimization, starting with smaller-scale problems (e.g., optimizing a network of traffic signals) before tackling generative design of larger urban districts.
	•	Embrace Open-Source for Flexibility and Capacity Building: While commercial software offers valuable usability and support for standardized project delivery, open-source tools like SUMO and MATSim are invaluable strategic assets. They offer unparalleled flexibility for research, customization, and integration with other platforms. By building expertise in open-source tools, agencies can avoid vendor lock-in, foster innovation, and develop a deep, in-house understanding of the modeling assumptions that underpin their decisions. This fosters a culture of transparency and continuous improvement, positioning the agency at the forefront of computational urban planning.

Appendices


Appendix A: Recommended Tools and Resources

	•	Simulation Engines:
	•	SUMO (Simulation of Urban MObility): The premier open-source microscopic simulator. Ideal for detailed analysis, research, and custom algorithm development. Website: https://eclipse.dev/sumo/
	•	MATSim (Multi-Agent Transport Simulation): The leading open-source framework for large-scale, activity-based modeling. Ideal for strategic policy and land-use analysis. Website: https://www.matsim.org/
	•	Network Preparation:
	•	OSMnx: A Python library that simplifies the process of downloading, modeling, and analyzing road networks from OpenStreetMap. It can be used to prepare network data before importing into a simulator. 41
	•	JOSM (Java OpenStreetMap Editor): A powerful desktop editor for OpenStreetMap data. Useful for cleaning and correcting network data at a detailed level before simulation import.
	•	Data Analysis & Visualization:
	•	Python: The de facto language for scripting and data analysis in this domain.
	•	Pandas & GeoPandas: Essential Python libraries for manipulating tabular and geospatial data, respectively. Critical for post-processing simulation outputs.
	•	Matplotlib & Seaborn: Standard Python libraries for creating static plots and visualizations.
	•	matsim-tools: A Python package specifically designed to read, analyze, and write MATSim data files, providing a bridge to the Pandas/GeoPandas ecosystem.73

Appendix B: Curated Academic Literature (2010-2024)

This section provides a curated list of influential academic papers published between 2010 and 2024 in the field of simulation-based optimization for urban and transportation planning, drawing from the reviewed sources.
Frameworks and Methodologies:
	•	Osorio, C., & Bierlaire, M. (2013). A Simulation-Based Optimization Framework for Urban Transportation Problems. Operations Research, 61(6), 1333–1345. This foundational paper proposes a metamodel that combines an analytical queueing network model with a stochastic simulator to efficiently solve problems like traffic signal control.57
	•	Reitberger, R., et al. (2024). A generic process for simulation-based multi-objective optimization and multi-criteria decision support in urban planning. Building and Environment, 255, 111360. This paper presents a systematic process and tool-chain for applying multi-objective optimization to computationally expensive urban simulation models, focusing on generating Pareto-optimal solutions for planners.60
	•	Feng, Y., et al. (2024). A review of simulation-based urban form generation and optimization modeling for energy-driven urban design at the district scale. Energy and Buildings. Proposes a structure for simulation-based optimization that combines a generative model, an optimization engine, and a simulation program to optimize urban form for energy performance.75
Surrogate Modeling and High-Dimensional Optimization:
	•	Tang, K., et al. (2024). An adversarial diverse deep ensemble approach for surrogate-based traffic signal optimization. Computer-Aided Civil and Infrastructure Engineering. Addresses the challenge of online optimization with tight computational budgets by using an ensemble of deep learning models as a surrogate, with a focus on improving prediction accuracy on extreme points.53
	•	Gu, Z., et al. (2023). Exploration via random-walk-based sampling for high-dimensional simulation-based optimization. Transportation Science. Focuses on balancing exploration and exploitation in high-dimensional SO problems, proposing a novel sampling mechanism suitable for large-scale transportation networks with tight computational budgets.54
Applications in Urban Planning and Logistics:
	•	Mahmoud, H., et al. (2021). Urban Traffic Analysis and Optimization Based on a Sector-Based Time Variable: A Simulation-Based Computational Approach. Frontiers in Sustainable Cities. Uses simulation to model and optimize urban traffic flow by adjusting the operational hours of different urban sectors (commercial, industrial, etc.), demonstrating the impact on delay and queueing.77
	•	Liu, K., & Liu, R. (2024). Multi-Scenario Urban Local Climate Zone Spatial Optimization Framework Based on Genetic Algorithm and FLUS Model. Remote Sensing. Proposes a framework integrating a genetic algorithm with the FLUS land use simulation model to optimize the spatial distribution of Local Climate Zones (LCZs) to mitigate the urban heat island effect.78
	•	Almeida, F., et al. (2024). An Integrated Agent-Based Simulation and Optimization Approach for the Pickup and Delivery Problem with Time Windows in Urban Logistics. Journal of Advanced Transportation. Combines an agent-based simulation with an optimization model to address the pickup and delivery problem (PDP) in a real-world urban logistics case study.79

Appendix C: Python Code Snippets

This appendix contains a consolidated collection of Python code for interacting with SUMO via TraCI and analyzing MATSim outputs.
1. SUMO: Standard TraCI Control Loop
This script demonstrates the fundamental structure for controlling a SUMO simulation from Python. It starts the simulation, steps through it, extracts basic data, and performs a simple control action.

Python


# File: run_sumo_with_traci.py import os import sys import traci import traci.constants as tc  def setup_sumo_path():     """Adds SUMO tools directory to the Python path."""     if 'SUMO_HOME' in os.environ:         tools = os.path.join(os.environ, 'tools')         sys.path.append(tools)     else:         sys.exit("Please declare environment variable 'SUMO_HOME'")  def run_simulation():     """Main function to run the SUMO simulation with TraCI control."""     setup_sumo_path()      sumo_binary = "sumo-gui"  # Use "sumo" for command-line execution     config_file = "scenario/my_scenario.sumocfg"     sumo_cmd = [sumo_binary, "-c", config_file]      print("Starting SUMO...")     traci.start(sumo_cmd)      step = 0     # The loop runs as long as there are vehicles that are expected to be in the simulation     while traci.simulation.getMinExpectedNumber() > 0:         traci.simulationStep()          # Example: Print average speed of all vehicles every 100 steps         if step % 100 == 0:             vehicle_ids = traci.vehicle.getIDList()             if vehicle_ids:                 speeds =                 avg_speed = sum(speeds) / len(speeds) if speeds else 0                 print(f"Step {step}: Average network speed = {avg_speed:.2f} m/s")          # Example: Implement a simple adaptive traffic light         # If a certain lane has more than 5 waiting cars, extend its green phase         target_lane = "edge_in_0"         tls_id = "junction_center"         if target_lane in traci.lane.getIDList():             waiting_cars = traci.lane.getLastStepHaltingNumber(target_lane)             if waiting_cars > 5:                 # Get current phase and extend it by 5 seconds                 current_phase = traci.trafficlight.getPhase(tls_id)                 traci.trafficlight.setPhaseDuration(tls_id, 5)          step += 1      traci.close()     print("Simulation finished.")  if __name__ == "__main__":     run_simulation() 
2. MATSim: Data Analysis with matsim-tools and Pandas
This script demonstrates how to use the matsim-tools library to read MATSim output files and perform a common analysis task: calculating and visualizing link volumes.

Python


# File: analyze_matsim_output.py import matsim.network as mn import matsim.events as me import pandas as pd import geopandas as gpd from collections import defaultdict import matplotlib.pyplot as plt  def analyze_link_volumes(network_file, events_file, output_shapefile):     """     Reads MATSim network and events files, calculates link volumes,     and saves the result as a GeoPackage file.     """     print(f"Reading network from {network_file}...")     # Read the network and convert it to a GeoDataFrame     net = mn.read_network(network_file)     net_gdf = net.as_geo()     print(f"Network loaded with {len(net_gdf)} links.")      print(f"Streaming events from {events_file} to calculate volumes...")     # Use the event_reader to efficiently process large event files     events = me.event_reader(events_file, types='entered link')      # Use a defaultdict to count occurrences of vehicles entering each link     link_counts = defaultdict(int)     for event in events:         link_counts[event['link']] += 1     print(f"Finished processing events. Found volumes for {len(link_counts)} links.")      # Convert the dictionary of counts to a Pandas DataFrame     volumes_df = pd.DataFrame.from_dict(         link_counts, orient='index', columns=['volume']     ).rename_axis('link_id')      # Merge the volume data with the network GeoDataFrame     # Use a left merge to keep all network links, even those with zero volume     network_with_volumes = net_gdf.merge(volumes_df, on='link_id', how='left')     # Fill NaN values for links with no traffic with 0     network_with_volumes['volume'].fillna(0, inplace=True)      print(f"Saving network with volumes to {output_shapefile}...")     network_with_volumes.to_file(output_shapefile, driver='GPKG')      # --- Visualization ---     fig, ax = plt.subplots(1, 1, figsize=(15, 15))     network_with_volumes.plot(         column='volume',         ax=ax,         legend=True,         cmap='viridis',         linewidth=network_with_volumes['volume'] / network_with_volumes['volume'].max() * 5,         legend_kwds={'label': "Link Volume (vehicles/day)", 'orientation': "horizontal"}     )     ax.set_title("MATSim Simulated Link Volumes")     ax.set_axis_off()     plt.savefig("link_volumes.png")     print("Visualization saved to link_volumes.png")  if __name__ == "__main__":     # Define file paths     # These files would be the output of a MATSim run     NETWORK_FILE = 'output/output_network.xml.gz'     EVENTS_FILE = 'output/output_events.xml.gz'     OUTPUT_FILE = 'analysis/network_with_volumes.gpkg'      analyze_link_volumes(NETWORK_FILE, EVENTS_FILE, OUTPUT_FILE) 
Alıntılanan çalışmalar
	•	Traffic Analysis Tools: Assessment, Comparison and Validation Study - ROSA P, erişim tarihi Kasım 3, 2025, https://rosap.ntl.bts.gov/view/dot/72363/dot_72363_DS1.pdf
	•	(PDF) Combining Traffic Microsimulation Modeling and Multi-Criteria ..., erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/352726100_Combining_Traffic_Microsimulation_Modeling_and_Multi-Criteria_Analysis_for_Sustainable_Spatial-Traffic_Planning
	•	Traffic Micro-Simulation of Urban Road Network - ResearchGate, erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/269082260_Traffic_Micro-Simulation_of_Urban_Road_Network
	•	(PDF) Optimising Traffic Signal Control with Evolutionary Algorithms, erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/228838032_Optimising_Traffic_Signal_Control_with_Evolutionary_Algorithms
	•	Optimizing Urban Transportation Systems Using Simulation and Modelling, erişim tarihi Kasım 3, 2025, https://ijtm.my.id/index.php/IJTM/article/download/120/66
	•	SIMULATION-BASED OPTIMIZATION - ResearchGate, erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/277284729_SIMULATION-BASED_OPTIMIZATION
	•	Traffic simulation software review - ResearchGate, erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/323789514_Traffic_simulation_software_review
	•	traffic_microsimulation_modelling.pdf - Chartered Institution of Highways and Transportation, erişim tarihi Kasım 3, 2025, https://www.ciht.org.uk/media/4365/traffic_microsimulation_modelling.pdf
	•	Types of Traffic Models | Microscopic Models | Macroscopic Models | Traffic Flow Models - AboutCivil.Org, erişim tarihi Kasım 3, 2025, https://www.aboutcivil.org/traffic-flow-models
	•	Traffic and Transportation Simulation, erişim tarihi Kasım 3, 2025, https://onlinepubs.trb.org/onlinepubs/circulars/ec195.pdf
	•	Traffic Modelling - Austroads, erişim tarihi Kasım 3, 2025, https://austroads.gov.au/__data/assets/pdf_file/0026/392066/Module_6-4_Traffic_Modelling.pdf
	•	(PDF) A comparative analysis of currently used microscopic and macroscopic traffic simulation software - ResearchGate, erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/228676772_A_comparative_analysis_of_currently_used_microscopic_and_macroscopic_traffic_simulation_software
	•	Traffic Analysis Toolbox Volume III: Guidelines for Applying Traffic Microsimulation Modeling Software - ROSA P, erişim tarihi Kasım 3, 2025, https://rosap.ntl.bts.gov/view/dot/43570/dot_43570_DS1.pdf
	•	Appendix A: Traffic Microsimulation Fundamentals - FHWA Office of Operations, erişim tarihi Kasım 3, 2025, https://ops.fhwa.dot.gov/trafficanalysistools/tat_vol3/sectapp_a.htm
	•	Microscopic Traffic Modeling Inside Intersections: Interactions Between Drivers | Transportation Science - PubsOnLine, erişim tarihi Kasım 3, 2025, https://pubsonline.informs.org/doi/10.1287/trsc.2022.1163
	•	SUMO (Simulation of Urban MObility); An open-source traffic simulation - ResearchGate, erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/224793504_SUMO_Simulation_of_Urban_MObility_An_open-source_traffic_simulation
	•	Overview Of Application Of Traffic Simulation Model - MATEC Web of Conferences, erişim tarihi Kasım 3, 2025, https://www.matec-conferences.org/articles/matecconf/pdf/2018/09/matecconf_mucet2018_03006.pdf
	•	Leveraging Traffic Microsimulation for Smarter Network Design - Galloway & Company, erişim tarihi Kasım 3, 2025, https://gallowayus.com/leveraging-traffic-microsimulation-for-smarter-network-design/
	•	Pre-study and insights to a sequential MATSim-SUMO tool-coupling ..., erişim tarihi Kasım 3, 2025, https://eclipse.dev/sumo/documents/2020/SUMO2020_paper_44.pdf
	•	Creating and Validating Hybrid Large-Scale, Multi-Modal Traffic ..., erişim tarihi Kasım 3, 2025, https://www.mdpi.com/2624-6511/8/1/2
	•	Agent-based modeling for traffic simulation - SciSpace, erişim tarihi Kasım 3, 2025, https://scispace.com/pdf/agent-based-modeling-for-traffic-simulation-nvqj3r96pj.pdf
	•	Agent-Based Modeling and Simulation of Connected Corridors—Merits Evaluation and Future Steps, erişim tarihi Kasım 3, 2025, https://connected-corridors.berkeley.edu/sites/default/files/Agent-Based%20Modeling%20and%20Simulation_0.pdf
	•	A Primer for Agent-Based Simulation and Modeling in Transportation Applications , November 2013 - FHWA-HRT-13-054, erişim tarihi Kasım 3, 2025, https://www.fhwa.dot.gov/publications/research/ear/13054/005.cfm
	•	The Multi-Agent Transport Simulation MATSim, erişim tarihi Kasım 3, 2025, https://www.matsim.org/files/book/partOne-latest.pdf
	•	TAG Unit M5.4 Agent-based Methods and Activity-based Demand Modelling - GOV.UK, erişim tarihi Kasım 3, 2025, https://assets.publishing.service.gov.uk/media/666af3bf50dca4553304f334/tag-unit-m5-4-agent-based-methods-activity-based-demand-modelling.pdf
	•	Activity-Based Model Implementation and Analysis Considerations - ROSA P, erişim tarihi Kasım 3, 2025, https://rosap.ntl.bts.gov/view/dot/77610/dot_77610_DS1.pdf
	•	An Advanced Travel Demand Synthesis Process for Creating a MATSim Activity Model: The Case of Ústí nad Labem - MDPI, erişim tarihi Kasım 3, 2025, https://www.mdpi.com/2076-3417/12/19/10032
	•	How do multi-agent systems simulate traffic flow? - Milvus, erişim tarihi Kasım 3, 2025, https://milvus.io/ai-quick-reference/how-do-multiagent-systems-simulate-traffic-flow
	•	Simulation Software for Traffic Engineering | by MD TAWKIR AHMED - Medium, erişim tarihi Kasım 3, 2025, https://medium.com/@tawkir.ahmed.018/simulation-software-for-traffic-engineering-1f191d5a4d9c
	•	SUMO: Advanced Traffic Simulation for Urban Mobility Planning ..., erişim tarihi Kasım 3, 2025, https://simtool.com/sumo-advanced-traffic-simulation-for-urban-mobility-planning/
	•	SUMO Documentation - Eclipse SUMO - Simulation of Urban MObility, erişim tarihi Kasım 3, 2025, https://sumo.dlr.de/docs/index.html
	•	Tutorials - SUMO Documentation - Eclipse SUMO - Simulation of Urban MObility, erişim tarihi Kasım 3, 2025, https://sumo.dlr.de/docs/Tutorials/index.html
	•	MATSim, erişim tarihi Kasım 3, 2025, https://matsim.org/
	•	MATSim-T: Architecture and Simulation Times - TU Berlin - VSP, erişim tarihi Kasım 3, 2025, https://svn.vsp.tu-berlin.de/repos/public-svn/publications/vspwp/2008/08-03/3aug08.pdf
	•	Traffic Simulations Software: A Comparison of SUMO, PTV Vissim, Aimsun, and CUBE, erişim tarihi Kasım 3, 2025, https://thinktransportation.net/traffic-simulations-software-a-comparison-of-sumo-ptv-vissim-aimsun-and-cube/
	•	Traffic Simulation with Open-Source and Commercial Traffic Microsimulators: A Case Study, erişim tarihi Kasım 3, 2025, https://komunikacie.uniza.sk/pdfs/csl/2022/02/02.pdf
	•	comparison of the two micro- simulation software aimsun & sumo for highway traffic modelling - DiVA portal, erişim tarihi Kasım 3, 2025, https://www.diva-portal.org/smash/get/diva2:555913/FULLTEXT01.pdf
	•	Aimsun Next, erişim tarihi Kasım 3, 2025, https://www.aimsun.com/wp-content/uploads/2021/08/Aimsun-Next-complete-guide-to-all-editions-and-extras.pdf
	•	Protocol for VISSIM Simulation - WSdot.com, erişim tarihi Kasım 3, 2025, https://wsdot.wa.gov/sites/default/files/2021-03/TrafficOps-VISSIM-Protocol.pdf
	•	OpenStreetMap - SUMO Documentation, erişim tarihi Kasım 3, 2025, https://sumo.dlr.de/docs/Networks/Import/OpenStreetMap.html
	•	Traffic Modeling with SUMO: a Tutorial - arXiv, erişim tarihi Kasım 3, 2025, https://arxiv.org/html/2304.05982v2
	•	Free Tutorial - SUMO Traffic Simulator - Udemy, erişim tarihi Kasım 3, 2025, https://www.udemy.com/course/sumo-traffic-simulator/
	•	Advanced Traffic Demand Generation in SUMO: ML-based Prediction of Flow Rate based on Real-world Measured Datasets - ieeevtc.org, erişim tarihi Kasım 3, 2025, http://ieeevtc.org/vtc2024spring/DATA/PID2024002320.pdf
	•	(PDF) Advanced Traffic Demand Generation in SUMO: ML-based Prediction of Flow Rate based on Real-world Measured Datasets - ResearchGate, erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/384053345_Advanced_Traffic_Demand_Generation_in_SUMO_ML-based_Prediction_of_Flow_Rate_based_on_Real-world_Measured_Datasets
	•	Activity-based Demand Generation - Eclipse SUMO - Simulation of Urban MObility, erişim tarihi Kasım 3, 2025, https://sumo.dlr.de/docs/Demand/Activity-based_Demand_Generation.html
	•	Interfacing TraCI from Python - SUMO Documentation, erişim tarihi Kasım 3, 2025, https://sumo.dlr.de/docs/TraCI/Interfacing_TraCI_from_Python.html
	•	The beginning steps of SUMO TraCI programming with Python script, erişim tarihi Kasım 3, 2025, https://kjit.bme.hu/images/Tovabbi_allomanyok/Trafficlab/Research/SUMOTRACI/Python_TraCI.pdf
	•	ThomasMariaFrey/Comparative-Analysis-of-SUMO-and-MATSim-in-a-Case-Study - GitHub, erişim tarihi Kasım 3, 2025, https://github.com/ThomasMariaFrey/Comparative-Analysis-of-SUMO-and-MATSim-in-a-Case-Study
	•	Generating activity based, multi-modal travel demand ... - EasyChair, erişim tarihi Kasım 3, 2025, https://easychair.org/publications/download/G82Q
	•	Methodological Abstraction for Scalable Agent-Based ... - MATSim, erişim tarihi Kasım 3, 2025, https://matsim.org/conferences/mum2025/abstracts/MUM25_replan.pdf
	•	Agent-based modeling – Institute for Transport Planning and Systems | ETH Zurich, erişim tarihi Kasım 3, 2025, https://www.ivt.ethz.ch/en/research/matsim.html
	•	(PDF) Pre-study and insights to a sequential MATSim-SUMO tool-coupling to deduce 24h driving profiles for SAEVs - ResearchGate, erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/361625141_Pre-study_and_insights_to_a_sequential_MATSim-SUMO_tool-coupling_to_deduce_24h_driving_profiles_for_SAEVs
	•	An adversarial diverse deep ensemble approach for surrogate ..., erişim tarihi Kasım 3, 2025, https://ira.lib.polyu.edu.hk/bitstream/10397/111344/1/Tang_Adversarial_Diverse_Deep.pdf
	•	A Sampling Strategy for High-Dimensional, Simulation-Based Transportation Optimization Problems - PubsOnLine, erişim tarihi Kasım 3, 2025, https://pubsonline.informs.org/doi/10.1287/trsc.2023.0110
	•	A Computationally Efficient Simulation-Based Optimization Algorithm for Large-Scale Urban Transportation Problems - MIT, erişim tarihi Kasım 3, 2025, https://web.mit.edu/osorioc/www/papers/osoChoLgeScaleSO.pdf
	•	A surrogate model for traffic optimization of congested networks: an analytic queueing network approach - ResearchGate, erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/241924335_A_surrogate_model_for_traffic_optimization_of_congested_networks_an_analytic_queueing_network_approach
	•	A Simulation-Based Optimization Framework for Urban ..., erişim tarihi Kasım 3, 2025, https://dspace.mit.edu/handle/1721.1/89831
	•	Surrogate Model based Optimization of Traffic Lights Cycles and Green Period Ratios using Microscopic Simulation and Fuzzy Rule Interpolation | Alvarez Gil | International Journal of Artificial Intelligence™, erişim tarihi Kasım 3, 2025, http://www.ceser.in/ceserp/index.php/ijai/article/view/5441
	•	Traffic Optimization Through Waiting Prediction and Evolutive Algorithms - Re-UNIR, erişim tarihi Kasım 3, 2025, https://reunir.unir.net/bitstream/handle/123456789/15784/ip2023_12_001_0.pdf?sequence=1&isAllowed=y
	•	A generic process for multi-objective urban planning to support decision making in early design phase - Technische Universität München, erişim tarihi Kasım 3, 2025, https://www.gs.tum.de/fileadmin/w00bik/grk-ugi/Documents/Reitberger_et_al_2024.pdf
	•	A Simulation-Based Optimization Framework for Urban Transportation Problems | Request PDF - ResearchGate, erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/266702181_A_Simulation-Based_Optimization_Framework_for_Urban_Transportation_Problems
	•	traffic simulation - Federal Highway Administration, erişim tarihi Kasım 3, 2025, https://www.fhwa.dot.gov/publications/research/operations/tft/chap10.pdf
	•	Leveraging SUMO for Real-World Traffic Optimization: A ..., erişim tarihi Kasım 3, 2025, https://sumo.dlr.de/pdf/2024/1-2.pdf
	•	Preparing Data for Urban Traffic Simulation using SUMO, erişim tarihi Kasım 3, 2025, https://cdv.dei.uc.pt/wp-content/uploads/publications-cdv/misc13.pdf
	•	Modelling Pedestrian Dynamics in SUMO - CORE, erişim tarihi Kasım 3, 2025, https://core.ac.uk/download/pdf/31021395.pdf
	•	Generating activity based, multi-modal travel demand for SUMO - EasyChair, erişim tarihi Kasım 3, 2025, https://easychair.org/publications/paper/G82Q/download
	•	A MATSim model methodology to generate cycling-focused ..., erişim tarihi Kasım 3, 2025, https://elib.dlr.de/206078/1/1-s2.0-S2667091724000086-main.pdf
	•	The 15-minute city concept: The case study within a neighbourhood of Thessaloniki - PMC, erişim tarihi Kasım 3, 2025, https://pmc.ncbi.nlm.nih.gov/articles/PMC11295418/
	•	From Urban Data to City-Scale Models A Review of Traffic Simulation Case Studies, erişim tarihi Kasım 3, 2025, https://orbit.dtu.dk/files/409988646/IET_Intelligent_Trans_Sys_-_2025_-_Bochenina_-_From_Urban_Data_to_City_Scale_Models_A_Review_of_Traffic_Simulation_Case.pdf
	•	Microscopic Traffic Simulation as a Decision Support System for ..., erişim tarihi Kasım 3, 2025, https://www.mdpi.com/2071-1050/13/14/8076
	•	TomTom Data Applications for the Assessment of Tactical Urbanism Interventions: The Case of Bologna - Transform Transport, erişim tarihi Kasım 3, 2025, https://transformtransport.org/research/inclusive-mobility/tomtom-data-applications-for-the-assessment-of-tactical-urbanism-interventions-the-case-of-bologna/
	•	Traffic Analysis Toolbox Volume III: Guidelines for Applying Traffic Microsimulation Modeling Software, erişim tarihi Kasım 3, 2025, https://ops.fhwa.dot.gov/trafficanalysistools/tat_vol3/sect0.htm
	•	matsim-tools · PyPI, erişim tarihi Kasım 3, 2025, https://pypi.org/project/matsim-tools/
	•	matsimtools-ifpen - PyPI, erişim tarihi Kasım 3, 2025, https://pypi.org/project/matsimtools-ifpen/
	•	(PDF) A review for simulation-based urban form generation and optimization modeling for energy-driven urban design at the district scale - ResearchGate, erişim tarihi Kasım 3, 2025, https://www.researchgate.net/publication/316817061_A_review_for_simulation-based_urban_form_generation_and_optimization_modeling_for_energy-driven_urban_design_at_the_district_scale
	•	A Simulation-Based Optimization Framework for Urban Transportation Problems | Operations Research - PubsOnLine - Informs.org, erişim tarihi Kasım 3, 2025, https://pubsonline.informs.org/doi/10.1287/opre.2013.1226
	•	Urban Traffic Optimization Based on Modeling Analysis of Sector-Based Time Variable: The Case of Simulated Ningbo, China - Frontiers, erişim tarihi Kasım 3, 2025, https://www.frontiersin.org/journals/sustainable-cities/articles/10.3389/frsc.2021.629940/full
	•	Urban Multi-Scenario Land Use Optimization Simulation Considering Local Climate Zones, erişim tarihi Kasım 3, 2025, https://www.mdpi.com/2072-4292/16/22/4342
	•	An Agent-Based Simulation and Optimization Approach for Sustainable Urban Logistics: A Case Study in Lisbon - MDPI, erişim tarihi Kasım 3, 2025, https://www.mdpi.com/2571-5577/8/3/66
